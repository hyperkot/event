/// <reference path="../../typings/index.d.ts"/>
Object.defineProperty(exports, "__esModule", { value: true });
const chai_1 = require("chai");
const beacon_1 = require("../beacon");
describe("Beacon", () => {
    it("initiall value", () => {
        const TestValue = 1;
        let b = new beacon_1.Beacon(TestValue);
        chai_1.expect(b.value).to.equal(TestValue);
    });
    it("emits change event", (done) => {
        const TestValue = 1;
        let a = new beacon_1.Beacon(null);
        a.changed.on((newValue) => {
            chai_1.expect(newValue).to.equal(TestValue);
            done();
        });
        a.value = TestValue;
    });
    it("doesn't emit change event for same value", (done) => {
        const TestValue = 1;
        let a = new beacon_1.Beacon(TestValue);
        a.changed.on((newValue) => {
            throw new Error("Value changed");
        });
        a.value = TestValue;
        setTimeout(done, 0);
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmVhY29uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3Rlc3QvYmVhY29uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGdEQUFnRDs7QUFFaEQsK0JBQW9DO0FBQ3BDLHNDQUFpQztBQUVqQyxRQUFRLENBQUMsUUFBUSxFQUFFO0lBQ2YsRUFBRSxDQUFDLGdCQUFnQixFQUFFO1FBQ2pCLE1BQU0sU0FBUyxHQUFHLENBQUMsQ0FBQztRQUNwQixJQUFJLENBQUMsR0FBRyxJQUFJLGVBQU0sQ0FBUyxTQUFTLENBQUMsQ0FBQztRQUN0QyxhQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDeEMsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsb0JBQW9CLEVBQUUsQ0FBQyxJQUFlO1FBQ3JDLE1BQU0sU0FBUyxHQUFHLENBQUMsQ0FBQztRQUNwQixJQUFJLENBQUMsR0FBRyxJQUFJLGVBQU0sQ0FBUyxJQUFJLENBQUMsQ0FBQztRQUNqQyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFFBQWdCO1lBQzFCLGFBQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3JDLElBQUksRUFBRSxDQUFDO1FBQ1gsQ0FBQyxDQUFDLENBQUM7UUFDSCxDQUFDLENBQUMsS0FBSyxHQUFHLFNBQVMsQ0FBQztJQUN4QixDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQywwQ0FBMEMsRUFBRSxDQUFDLElBQWU7UUFDM0QsTUFBTSxTQUFTLEdBQUcsQ0FBQyxDQUFDO1FBQ3BCLElBQUksQ0FBQyxHQUFHLElBQUksZUFBTSxDQUFTLFNBQVMsQ0FBQyxDQUFDO1FBQ3RDLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUMsUUFBZ0I7WUFDMUIsTUFBTSxJQUFJLEtBQUssQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUNyQyxDQUFDLENBQUMsQ0FBQztRQUNILENBQUMsQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFDO1FBQ3BCLFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDeEIsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL2luZGV4LmQudHNcIi8+XG5cbmltcG9ydCB7ZXhwZWN0LCBhc3NlcnR9IGZyb20gXCJjaGFpXCI7XG5pbXBvcnQge0JlYWNvbn0gZnJvbSBcIi4uL2JlYWNvblwiO1xuXG5kZXNjcmliZShcIkJlYWNvblwiLCAoKSA9PiB7XG4gICAgaXQoXCJpbml0aWFsbCB2YWx1ZVwiLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IFRlc3RWYWx1ZSA9IDE7XG4gICAgICAgIGxldCBiID0gbmV3IEJlYWNvbjxudW1iZXI+KFRlc3RWYWx1ZSk7XG4gICAgICAgIGV4cGVjdChiLnZhbHVlKS50by5lcXVhbChUZXN0VmFsdWUpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJlbWl0cyBjaGFuZ2UgZXZlbnRcIiwgKGRvbmU6IE1vY2hhRG9uZSkgPT4ge1xuICAgICAgICBjb25zdCBUZXN0VmFsdWUgPSAxO1xuICAgICAgICBsZXQgYSA9IG5ldyBCZWFjb248bnVtYmVyPihudWxsKTtcbiAgICAgICAgYS5jaGFuZ2VkLm9uKChuZXdWYWx1ZTogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICBleHBlY3QobmV3VmFsdWUpLnRvLmVxdWFsKFRlc3RWYWx1ZSk7XG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBhLnZhbHVlID0gVGVzdFZhbHVlO1xuICAgIH0pO1xuXG4gICAgaXQoXCJkb2Vzbid0IGVtaXQgY2hhbmdlIGV2ZW50IGZvciBzYW1lIHZhbHVlXCIsIChkb25lOiBNb2NoYURvbmUpID0+IHtcbiAgICAgICAgY29uc3QgVGVzdFZhbHVlID0gMTtcbiAgICAgICAgbGV0IGEgPSBuZXcgQmVhY29uPG51bWJlcj4oVGVzdFZhbHVlKTtcbiAgICAgICAgYS5jaGFuZ2VkLm9uKChuZXdWYWx1ZTogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJWYWx1ZSBjaGFuZ2VkXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgYS52YWx1ZSA9IFRlc3RWYWx1ZTtcbiAgICAgICAgc2V0VGltZW91dChkb25lLCAwKTtcbiAgICB9KTtcbn0pOyJdfQ==